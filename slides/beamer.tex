\documentclass[aspectratio=1610]{beamer}
\beamertemplatenavigationsymbolsempty

\usetheme{Szeged}
\usecolortheme{beaver}

\usepackage{hyperref}              % Support clickable references

\usepackage{fontspec}              % Support non-latin characters
\setmonofont{Source Code Pro}%     % Select Source Code Pro for listings
            [Scale=MatchLowercase, % Adjust glyph size
             BoldFont={* Semibold}]% The Bold face is too bold

\usepackage{listings}              % Code blocks
\lstset{language={[ISO]C++},       % Default programming language
        breaklines=true,           % Break long lines in listings
        showstringspaces=false,    % Do not use visible spaces in strings
        morekeywords={constexpr,   % C++11 keywords
            decltype,static_assert}}

\usepackage{tikz}                  % TikZ drawings
\usepackage{pgfplots}
\pgfplotsset{width=12cm,height=6.5cm}
\usepackage{microtype}             % Enable black magic

\title{Proposing a Replacement for FreeBSD's powerd (Preview)}
\subtitle{Or, how I tamed the fan of my notebook}

\author[D. Fandrey]{Dominic Fandrey}
\institute[VLI]{Von Leitner-Institut f√ºr verteiltes Echtzeit-Java}
\date[GPN 2016]{GPN16, May 2016}
\logo{\includegraphics[width=1.5cm]{logo}}

\begin{document}

\begin{frame}[plain]
\titlepage
\end{frame}

\begin{frame}{Contents}
\tableofcontents[pausesections]
\end{frame}

\section{Who?}

\begin{frame}{kamikaze a.k.a. Dominic Fandrey}
\begin{itemize}
\item<1-> \href{mailto:kami@freebsd.org}{Dominic Fandrey <kami@freebsd.org>}
\item<1-> M.Sc. (Computer Science)
\item<2-> Located in Europe/Karlsruhe
\item<3-> Working as a researcher at an undisclosed polytechnic university
\item<3-> \begin{tikzpicture}[node distance=3cm]
\node (mugshot) {\includegraphics[height=3.0cm]{../images/mugshot}};
\onslide<4->{
\node (hair)[right of=mugshot] {\includegraphics[height=3.0cm]{../images/interests_hair}};}
\onslide<5->{
\node (uni)[right of=hair] {\includegraphics[height=3.0cm]{../images/interests_uni}};}
\onslide<6->{
\node (freebsd)[right of=uni] {\includegraphics[height=3.0cm]{freebsd-logo}};}
\end{tikzpicture}
\end{itemize}
\end{frame}

\section{What?}

\begin{frame}{Definitions}
\begin{itemize}
\item Load: \begin{itemize}
      \item<2-> The fraction of CPU cycles not spent idle
      \end{itemize}
\item<3-> P-State: \begin{itemize}
      \item<4-> Performance State, also frequently called stepping
      \item<5-> A CPU mode of operation with a specific clock frequency
                and core voltage
      \end{itemize}
\end{itemize}
\end{frame}

\begin{frame}{CPU p-state control}
\centering
\begin{tikzpicture}
\input{../drawings/powerd++-demo-load}
\onslide<2->{\input{../drawings/powerd++-demo-freq}}
\end{tikzpicture}
\end{frame}

\section{Why?}

\begin{frame}{Why control p-state?}
\begin{columns}[onlytextwidth]
\begin{column}{0.4\textwidth}
\begin{itemize}
\item<1-> Fan noise
\item<2-> Battery/Energy conservation
\item<3-> Hardware lifetime
\end{itemize}
\end{column}
\begin{column}{0.6\textwidth}
\begin{tikzpicture}[scale=.6]
\input{../drawings/powerd++-demo-load}
\input{../drawings/powerd++-demo-freq}
\end{tikzpicture}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Why replace powerd?}
\centering
\begin{tikzpicture}
\input{../drawings/powerd-demo-load}
\onslide<2->{\input{../drawings/powerd-demo-freq}}
\end{tikzpicture}
\end{frame}

\begin{frame}{Why replace powerd?}
\begin{columns}[onlytextwidth]
\begin{column}{0.4\textwidth}
\begin{itemize}
\item<1-> Broken load estimation
\item<2-> Aggressive speeding
\item<3-> Reluctant braking
\item<4-> Excessive fan noise
\end{itemize}
\end{column}
\begin{column}{0.6\textwidth}
\begin{tikzpicture}[scale=.6]
\input{../drawings/powerd-demo-load}
\input{../drawings/powerd-demo-freq}
\end{tikzpicture}
\end{column}
\end{columns}
\end{frame}

\section{Challenges!}

\begin{frame}{Measuring loads}
\centering
\begin{tikzpicture}
\input{../drawings/per-cpu-loads}
\end{tikzpicture}
\end{frame}

\begin{frame}{Measuring loads}
\begin{columns}[onlytextwidth]
\begin{column}{0.4\textwidth}
\begin{itemize}
\item<1-> Load is noisy
\item<2-> Load shifts
\item<3-> Load saturates
\end{itemize}
\end{column}
\begin{column}{0.6\textwidth}
\begin{tikzpicture}[scale=.6]
\input{../drawings/per-cpu-loads}
\end{tikzpicture}
\end{column}
\end{columns}
\end{frame}

\begin{frame}{Control algorithm}
\begin{columns}[onlytextwidth]
\begin{column}{0.6\textwidth}
\begin{itemize}
\item Contradicting goals: \begin{itemize}
      \item<2-> System should be responsive
      \item<3-> System should be efficient
      \end{itemize}
\item<4-> P-States: \begin{itemize}
      \item<5-> P-States lie
      \item<6-> Extremely low nonsense p-states
      \item<7-> P-State switching has a cost
      \end{itemize}
\end{itemize}
\end{column}
\begin{column}{0.4\textwidth}
\begin{itemize}
\item<8-> Conclusions: \begin{itemize}
      \item<9-> Make the right compromises
      \item<10-> Make it tunable
      \item<11-> Set sane defaults
      \end{itemize}
\end{itemize}
\end{column}
\end{columns}
\end{frame}

\section{How?}

\begin{frame}{Control algorithm (powerd)}
\centering
\includegraphics[height=6.5cm]{arch_powerd}
\end{frame}

\begin{frame}{Control algorithm (powerd++)}
\centering
\includegraphics[height=6.5cm]{arch_powerd++}
\end{frame}

\begin{frame}{Dealing with signal noise}
\begin{tikzpicture}
\onslide<1>{\input{../drawings/per-cpu-loads}}
\onslide<2>{\input{../drawings/per-cpu-loads-powerd}}
\onslide<3>{\input{../drawings/per-cpu-loads-powerd-unlimited}}
\onslide<4>{\input{../drawings/per-cpu-loads-filtered}}
\onslide<5>{\input{../drawings/per-cpu-loads-powerd++}}
\end{tikzpicture}
\end{frame}

\end{document}
